(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var n,t,s,f,r,i,l,e,a,o,c,u,h,y,g,j,b,p,O,d,v,m,w,E,S,q,P,T,k,D,V,K,z,U,B,W,F,G,A,N,H;function C(e){return null===e?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()}function x(e){return"string"!==C(e)||!e.length}function Q(e="",t,r){return!x(e)&&t<=(t=e.charCodeAt(0))&&t<=r}function X(e,t){if(e.length!==t.length)return!1;for(var r,n,i=0;i<e.length;i++)if(r=e[i],n=t[i],r!==n&&(!c(r)||!c(n)))return!1;return!0}function Y(n,i){void 0===i&&(i=X);var a=null;function e(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return a&&a.lastThis===this&&i(t,a.lastArgs)?a.lastResult:(e=n.apply(this,t),a={lastResult:e,lastArgs:t,lastThis:this},e)}return e.clear=function(){a=null},e}function Z(e,t,r){for(r of e.keys())if(J(r,t))return r}function J(e,t){var r,n,i;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&J(e[n],t[n]););return-1===n}if(r===Set){if(e.size!==t.size)return!1;for(n of e){if((i=n)&&"object"==typeof i&&!(i=Z(t,i)))return!1;if(!t.has(i))return!1}return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e){if((i=n[0])&&"object"==typeof i&&!(i=Z(t,i)))return!1;if(!J(n[1],t.get(i)))return!1}return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return-1===n}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}if(!r||"object"==typeof e){for(r in n=0,e){if(u.call(e,r)&&++n&&!u.call(t,r))return!1;if(!(r in t&&J(e[r],t[r])))return!1}return Object.keys(t).length===n}}return e!=e&&t!=t}function $(e,t,o){let n=t;function c(e,t){var r=e[t];if(void 0!==r)return Object.assign({"":e[""]+t},e[t])}function u(e,t){var r=e.charAt(0);return function e(t,r,n,i){if(!r)return o||1===Object.keys(t).length?t[""]?[[n,i,t[""]]]:[]:[[n,i,null]];if(1===Object.keys(t).length)return[[n,i,t[""]]].concat(u(r,i));let a=c(t,r.charAt(0));if(void 0===a)return[[n,i,t[""]]].concat(u(r,i));return e(a,r.slice(1),n,i+1)}(Object.assign({"":r},n[r]),e.slice(1),t,t+1)}return u(e,0)}function M(e){return Object.entries(e).reduce((e,[t,r])=>{var n="string"===C(r);return e[t]=n?{"":r}:M(r),e},{})}function _(e,t){return t.split("").reduce((e,t)=>(void 0===e[t]&&(e[t]={}),e[t]),e)}function ee(e={}){let n={};return"object"===C(e)&&Object.entries(e).forEach(([e,t])=>{let r=n;e.split("").forEach(e=>{void 0===r[e]&&(r[e]={}),r=r[e]}),r[""]=t}),function(e){return function n(i,e){return void 0===i||"string"===C(i)?e:Object.entries(e).reduce((e,[t,r])=>(e[t]=n(i[t],r),e),i)}(JSON.parse(JSON.stringify(e)),n)}}function te(e,t){return t?("function"===C(t)?t:ee(t))(e):e}function re(){let r=M(y),o=e=>_(r,e);return Object.entries(j).forEach(([r,n])=>{Object.entries(b).forEach(([e,t])=>{o(r+e)[""]=n+t})}),Object.entries(g).forEach(([e,t])=>{o(e)[""]=t}),Object.entries(m).forEach(([r,n])=>{Object.entries(p).forEach(([e,t])=>{o(r+e)[""]=n+t})}),["n","n'","xn"].forEach(e=>{o(e)[""]="ん"}),r.c=JSON.parse(JSON.stringify(r.k)),Object.entries(O).forEach(([e,t])=>{var r=e.slice(0,e.length-1),e=e.charAt(e.length-1);o(r)[e]=JSON.parse(JSON.stringify(o(t)))}),Object.entries(d).forEach(([r,e])=>{let n=e=>e.charAt(e.length-1),i=e=>e.slice(0,e.length-1);var a,t="x"+r,t=o(t);t[""]=e,o("l"+i(r))[n(r)]=t,a=r,[...Object.entries(O),["c","k"]].reduce((e,[t,r])=>a.startsWith(r)?e.concat(a.replace(r,t)):e,[]).forEach(t=>{["l","x"].forEach(e=>{o(e+i(t))[n(t)]=o(e+r)})})}),Object.entries(v).forEach(([e,t])=>{o(e)[""]=t}),[...Object.keys(j),"c","y","w","j"].forEach(e=>{var t=r[e];t[e]=function n(e){return Object.entries(e).reduce((e,[t,r])=>(e[t]=t?n(r):"っ"+r,e),{})}(t)}),delete r.n.n,Object.freeze(JSON.parse(JSON.stringify(r)))}function R(e=""){return!x(e)&&e.charCodeAt(0)===i}function ne(e="",n){let i="regexp"===C(n);return!x(e)&&[...e].every(e=>{[r=""]=[e];var r,t=!x(r)&&o.some(([e,t])=>Q(r,e,t));return i?t||n.test(e):t})}function L(e=""){return Q(e,f,r)}function ie(i="",a,{isDestinationRomaji:o,convertLongVowelMark:c}={}){let u="";return i.split("").reduce((e,t,r)=>{if([n=""]=[t],!(!x(n)&&n.charCodeAt(0)===l||S(t,r)||P(t))){var n;if(c&&u&&q(t,r))return n=a(u).slice(-1),L(i[r-1])&&"o"===n&&o?e.concat("お"):e.concat(T[n]);if(!R(t)&&L(t))return r=t.charCodeAt(0)+(s-f),n=String.fromCharCode(r),u=n,e.concat(n);u=""}return e.concat(t)},[]).join("")}function ae(){return k=null==k?(()=>{let t=M(D),i=e=>_(t,e),a=(e,t)=>{i(e)[""]=t};return Object.entries(V).forEach(([e,t])=>{i(e)[""]=t}),[...Object.entries(z),...Object.entries(B)].forEach(([e,t])=>{a(e,t)}),W.forEach(r=>{let n=i(r)[""][0];Object.entries(z).forEach(([e,t])=>{a(r+e,n+t)}),Object.entries(U).forEach(([e,t])=>{a(r+e,n+t)})}),Object.entries(F).forEach(([r,n])=>{Object.entries(z).forEach(([e,t])=>{a(r+e,n+t[1])}),a(r+"ぃ",n+"yi"),a(r+"ぇ",n+"e")}),t["っ"]=function e(t){return Object.entries(t).reduce((t,[r,n])=>{if(r)t[r]=e(n);else{let e=n.charAt(0);t[r]=Object.keys(A).includes(e)?A[e]+n:n}return t},{})}(t),Object.entries(G).forEach(([e,t])=>{a(e,t)}),K.forEach(e=>{a("ん"+e,"n'"+i(e)[""])}),Object.freeze(JSON.parse(JSON.stringify(t)))})():k}function I(n="",e={},t){let i=h(e);return t=t||N(i.romanization,i.customRomajiMapping),e=n,r=i,t=(t=t)||N(r.romanization,r.customRomajiMapping),a=Object.assign({},{isDestinationRomaji:!0},r),$(ie(e,I,a),t,!r.IMEMode).map(e=>{var[e,t,r]=e;return i.upcaseKatakana&&([e=""]=[n.slice(e,t)],!x(e))&&[...e].every(L)?r.toUpperCase():r}).join("");var r,a}function oe(){var t=20;let r=setInterval(()=>{var e=document.querySelector(".main-trackInfo-name span a");null!=e&&e.textContent&&(clearInterval(r),e.textContent=I(e.textContent)),document.querySelectorAll(".LineClamp").forEach(e=>{e.textContent&&(e.textContent=I(e.textContent))}),--t<=0&&clearInterval(r)},100)}t={useObsoleteKana:!(n="hepburn"),passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:n},s=12353,f=12449,a=[[12288,12351],e=[65377,65381],[l=12539,i=r=12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],[...[[12352,12447],[12448,12543],e,[65382,65439]]],[...a],o=[[0,127],[256,257],[274,275],[298,299],[332,333],[362,363]],c=Number.isNaN||function(e){return"number"==typeof e&&e!=e},u=Object.prototype.hasOwnProperty,h=(e={})=>Object.assign({},t,e),y={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},g={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},j={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},b={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},p={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},O={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},d=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},p,b),v={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},m={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"},w=null,E=ee({wi:"ゐ",we:"ゑ"}),Y((e,t,r)=>{let n=w=null==w?re():w;return n=e?(e=n,(e=JSON.parse(JSON.stringify(e))).n.n={"":"ん"},e.n[" "]={"":"ん"},e):n,n=t?E(n):n,n=r?te(n,r):n},J),S=(e,t)=>R(e)&&t<1,q=(e,t)=>R(e)&&0<t,P=e=>["ヶ","ヵ"].includes(e),T={a:"あ",i:"い",u:"う",e:"え",o:"う"},k=null,D={"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"shi","す":"su","せ":"se","そ":"so","た":"ta","ち":"chi","つ":"tsu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","や":"ya","ゆ":"yu","よ":"yo","わ":"wa","ゐ":"wi","ゑ":"we","を":"wo","ん":"n","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"ji","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"ji","づ":"zu","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo"},V={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},K=["あ","い","う","え","お","や","ゆ","よ"],z={"ゃ":"ya","ゅ":"yu","ょ":"yo"},U={"ぃ":"yi","ぇ":"ye"},B={"ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},W=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],F={"し":"sh","ち":"ch","じ":"j","ぢ":"j"},G={"っ":"","ゃ":"ya","ゅ":"yu","ょ":"yo","ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},A={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"},N=Y((e,t)=>{let r=e!==n?{}:ae();return r=t?te(r,t):r},J),H=async function(){for(;null==Spicetify||!Spicetify.showNotification;)await new Promise(e=>setTimeout(e,100));Spicetify.showNotification("spicetify-titles-romaji extension loaded!"),oe(),Spicetify.Player.addEventListener("songchange",async()=>{var e;Spicetify.Player.data&&(e=Spicetify.Player.data.item)&&e.metadata&&(ne(e.metadata.title)||oe())})},(async()=>{await H()})()})();